<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Contact Us - Atyant Loan Solutions</title>
<link rel="icon" href="../assets/logo.png" type="image/png"/>

<!-- Bootstrap & FontAwesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<!-- Custom CSS -->
<link rel="stylesheet" href="../navbar.css" />
<link rel="stylesheet" href="./contact.css" />
</head>
<body>

<!-- Loader -->
<div id="preloader" class="d-flex justify-content-center align-items-center flex-column">
  <div class="spinner-border spinner-border-sm text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-2">Loading...</p>
</div>

<!-- Navbar dynamically injected -->
<div id="navbar-container"></div>

<!-- Contact Form -->
<div class="container mt-5 mb-5">
  <h2 class="text-center mb-4 logo-title">📬 Contact Us</h2>
  <form id="contactForm">
    
    <div class="mb-3">
      <label for="name" class="form-label">👤 Full Name</label>
      <input type="text" id="name" class="form-control" placeholder="John Doe" required>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">📧 Email</label>
      <input type="email" id="email" class="form-control" placeholder="example@gmail.com" required>
    </div>
    <div class="mb-3">
      <label for="phone" class="form-label">📞 Mobile Number</label>
      <input type="tel" id="phone" class="form-control" pattern="[0-9]{10}" placeholder="9876543210" required>
    </div>
    <div class="mb-3">
      <label for="message" class="form-label">📝 Message</label>
      <textarea id="message" class="form-control" rows="5" placeholder="Type your message here..." required></textarea>
    </div>

    <div class="terms-box mb-3">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="agreeTerms" required>
        <label class="form-check-label" for="agreeTerms">
          I hereby declare that the information provided above is true and correct. 
          I authorize Atyant Loan Solutions and its financial partners to contact me for loan assistance and related services, 
          and I agree to the <a href="../terms/terms.html" target="_blank">Terms & Conditions</a> and Privacy Policy.
        </label>
      </div>
    </div>

    <button type="submit" class="btn btn-primary w-100">🚀 Submit</button>

    <div id="thankYouMessage" class="alert alert-success mt-3 d-none">
      ✅ Thank you! Your message has been sent successfully.
    </div>
  </form>
</div>

<!-- Footer dynamically injected -->
<div id="footer-container"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../navbar.js"></script>
<script>
  const preloader = document.getElementById("preloader");

  // Hide loader after page fully loads
  window.addEventListener("load", () => {
    preloader.style.transition = "opacity 0.5s ease";
    preloader.style.opacity = 0;
    preloader.style.pointerEvents = "none"; // prevent blocking clicks
    setTimeout(() => preloader.style.display = "none", 500);
  });

  // Load navbar and footer after DOM ready
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof loadNavbar === 'function') loadNavbar();
    if (typeof loadFooter === 'function') loadFooter();
  });

  function loadFooter() {
    const footerContainer = document.getElementById('footer-container');
    footerContainer.innerHTML = `
      <footer class="bg-dark text-white text-center py-4">
        <div class="container">
          <h5>Atyant Loan Solutions</h5>
          <p>Office No. 406, 4th Floor, Kaveri Building, Near Sakinaka Metro, Andheri East, Mumbai-400072</p>
          <p><strong>Phone:</strong> +91 7304228389 | <strong>Email:</strong> akram.shaikh@atyantloan.com</p>
          <div class="social-icons mb-3">
            <a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
            <a href="#" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            <a href="https://www.instagram.com/atyantloansolutions/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
          </div>
          <p>&copy; 2025 Atyant Loan Solutions. All Rights Reserved.</p>
        </div>
      </footer>
    `;
  }

  // Contact form submission
  const contactForm = document.getElementById("contactForm");
  contactForm.addEventListener("submit", async function(e){
    e.preventDefault();
    const agreeTerms = document.getElementById("agreeTerms");
    if (!agreeTerms.checked) {
      alert("⚠️ Please agree to the Terms & Conditions before submitting.");
      return;
    }

    // Show loader during submission
    preloader.style.display = "flex";
    preloader.style.opacity = 1;
    preloader.style.pointerEvents = "auto";

    const data = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      phone: document.getElementById("phone").value,
      message: document.getElementById("message").value
    };

    try {
      const res = await fetch("/.netlify/functions/sendEmail", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await res.json();

      // Hide loader after response
      preloader.style.opacity = 0;
      preloader.style.pointerEvents = "none";
      setTimeout(() => preloader.style.display = "none", 500);

      if (res.ok && result.success) {
        contactForm.reset();
        document.getElementById("thankYouMessage").classList.remove("d-none");
      } else {
        alert("❌ Failed: " + (result.error || result.message));
      }
    } catch(err) {
      preloader.style.opacity = 0;
      preloader.style.pointerEvents = "none";
      setTimeout(() => preloader.style.display = "none", 500);
      console.error(err);
      alert("❌ Failed to send message. Please try again later.");
    }
  });
</script>
</body>
</html>
